import{p as e,a as l,B as a,i as t,b as o,D as r,r as i,o as d,c as s,f as p,F as u,l as n,w as c,h as m,L as b,E as y,t as f}from"./vendor.783501fb.js";import{f as k}from"./index.5a2f37f4.js";import{_ as D,a as v,b as h}from"./MesuringTable.2c9644ae.js";import{_ as q,a as V}from"./ProductDetail.61e77cfb.js";const g={components:{BaseTable:D,MesuringTable:v,ProcessPriceTag:q,ProductAdd:h},props:{visible:{type:Boolean,required:!0},partId:{type:String}},emits:["close","dialog-submit"],name:"product-add",setup(e,{emit:l}){const i=a({}),d=t("process"),s=o((()=>e.visible));r(s,(()=>{1==s.value?e.itemData&&Object.keys(e.itemData).map((l=>{i[l]=e.itemData[l]})):Object.keys(i).map((e=>{delete i[e]}))}));const p=t(!1),u=t(null);return{stepColumns:[{label:"工序",prop:"stepName"},{label:"操作者",prop:"userName",slot:"userName"},{label:"当前状态",prop:"status"},{label:"操作设备",prop:"equipment"},{label:"接受产品数量",prop:"receiveNum"},{label:"开工时间",prop:"startTime"},{label:"要求完工时间",prop:"planFinishTime"},{label:"实际完工时间",prop:"finishTime"},{label:"合格产品数量",prop:"qualifiedNum"},{label:"运行时间",prop:"runTime",slot:"runTime"},{label:"最高记录",prop:"highScore"},{label:"工序单价（元）",prop:"stepPrice"},{label:"备注",prop:"remark"}],meusringColumns:[{label:"量具名称",prop:"mesuringName"},{label:"量具规格",prop:"mesuringSpecs"},{label:"量具编号",prop:"mesuringId"},{label:"归属序号",prop:"fromIndex"},{label:"数量",prop:"num"},{label:"状态",prop:"status"},{label:"入库时间",prop:"inTime"},{label:"归还时间",prop:"returnTime"}],partStepColumns:[{label:"工序",prop:"stepName"},{label:"操作设备",prop:"equipment"},{label:"工序单价",prop:"stepPrice"}],editPartStepFormItems:[{label:"工序",key:"stepName",required:!0},{label:"操作设备",key:"equipment",required:!0}],close:()=>{l("close")},activeName:d,saveEdit:()=>{l("dialog-submit",i)},form:i,partStepEditVisible:p,handleAddStep:()=>{p.value=!0,u.value=null},handleEditStep:e=>{p.value=!0,u.value=e},handleDeleteStep:e=>{},editPartStepItemData:u,editPartStepSubmit:e=>{}}}},I=c();e("data-v-a403476e");const _=m("添加工序"),C=m("编辑 "),S=m("删除"),P={class:"dialog-footer"},T=m("关 闭");l();const x=I(((e,l,a,t,o,r)=>{const c=i("ProcessPriceTag"),m=i("BaseTable"),b=i("el-card"),y=i("el-tab-pane"),f=i("el-button"),k=i("ProductAdd"),D=i("el-tabs"),v=i("el-dialog");return d(),s(v,{"append-to-body":!0,title:`零件生产详情 - ${a.partId}`,modelValue:a.visible,"onUpdate:modelValue":l[3]||(l[3]=e=>a.visible=e),"show-close":!1,"destroy-on-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"80%"},{footer:I((()=>[p("span",P,[p(f,{onClick:t.close},{default:I((()=>[T])),_:1},8,["onClick"])])])),default:I((()=>[p(D,{modelValue:t.activeName,"onUpdate:modelValue":l[2]||(l[2]=e=>t.activeName=e)},{default:I((()=>[p(y,{label:"生产情况",name:"process",class:"part-info"},{default:I((()=>[(d(),s(u,null,n(3,(e=>p(b,{class:"part-card",key:e,style:{padding:"0","margin-bottom":"10px"}},{default:I((()=>[p(c,{fromIndex:"21-9-1"}),p(m,{noBorder:"",noPager:"",cols:t.stepColumns,url:"/step",needOperation:!1},null,8,["cols"])])),_:2},1024))),64))])),_:1}),p(y,{label:"工序设置",name:"mesuring"},{default:I((()=>[p(f,{type:"primary",icon:"el-icon-plus",style:{"margin-bottom":"10px"},onClick:t.handleAddStep},{default:I((()=>[_])),_:1},8,["onClick"]),p(m,{cols:t.partStepColumns,url:"/partStep"},{operation:I((e=>[p(f,{type:"text",icon:"el-icon-edit",onClick:l=>t.handleEditStep(e.scopeData)},{default:I((()=>[C])),_:2},1032,["onClick"]),p(f,{type:"text",icon:"el-icon-delete",class:"color-warning",onClick:l=>t.handleDeleteStep(e.scopeData)},{default:I((()=>[S])),_:2},1032,["onClick"])])),_:1},8,["cols"]),p(k,{visible:t.partStepEditVisible,onClose:l[1]||(l[1]=e=>t.partStepEditVisible=!1),title:"工序设置",itemData:t.editPartStepItemData,formItems:t.editPartStepFormItems,key:"product-edit",onDialogSubmit:t.editPartStepSubmit},null,8,["visible","itemData","formItems","onDialogSubmit"])])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["title","modelValue"])}));g.render=x,g.__scopeId="data-v-a403476e";const N={components:{BaseTable:D,ProductAdd:h,ProductDetail:V,PartDetail:g},name:"product-manage",setup(){const e=a({address:"",name:"",pageIndex:1,pageSize:10}),l=t([]),o=t(0),r=()=>{k(e).then((e=>{l.value=e.list,o.value=e.pageTotal||50}))};r();const i=t(!1),d=t(null),s=t(!1),p=t(!1),u=t("");return{columns:[{label:"序号",prop:"index",slot:"index"},{label:"任务号",prop:"taskId"},{label:"产品代号",prop:"productId"},{label:"零件代号",prop:"partId",slot:"partId"},{label:"零件名称",prop:"partName"},{label:"图纸工序",prop:"blueprintProcess"},{label:"本厂实际工序",prop:"factoryProcess"},{label:"回厂数量",prop:"backFactoryNum"},{label:"回厂日期",prop:"backFactoryTime"},{label:"调度备注",prop:"dispatchRemark"},{label:"甲方要求回厂时间",prop:"customerBackFactoryTime"},{label:"状态",prop:"status",slot:"status"},{label:"备注",prop:"remark"},{label:"出厂数量",prop:"outFactoryNum"},{label:"出厂时间",prop:"outFactoryTime"},{label:"最终甲方检验合格数",prop:"finalCustomerQualifiedNum"}],formItems:[{label:"序号",key:"index",required:!0},{label:"任务号",key:"taskId",required:!0},{label:"产品代号",key:"productId",required:!0},{label:"零件代号",key:"partId",required:!0},{label:"名称",key:"name",required:!0},{label:"图纸工序",key:"blueprintProcess",required:!0},{label:"本厂实际工序",key:"factoryProcess",required:!0},{label:"回厂数量",key:"backFactoryNum",required:!0},{label:"回厂日期",key:"backFactoryTime",required:!0,type:"date"},{label:"调度备注",key:"dispatchRemark",required:!0},{label:"甲方要求回厂时间",key:"customerBackFactoryTime",required:!0,type:"date"},{label:"状态",key:"status",required:!0},{label:"备注",key:"remark",required:!0},{label:"出厂数量",key:"outFactoryNum",required:!0},{label:"出厂时间",key:"outFactoryTime",required:!0,type:"date"},{label:"最终甲方检验合格数",key:"finalCustomerQualifiedNum",required:!0}],query:e,tableData:l,pageTotal:o,editVisible:i,handleSearch:()=>{e.pageIndex=1,r()},handlePageChange:l=>{e.pageIndex=l,r()},handleDelete:e=>{b.confirm("确定要删除吗？","提示",{type:"warning"}).then((()=>{y.success("删除成功"),l.value.splice(e,1)})).catch((()=>{}))},handleEdit:e=>{i.value=!0,d.value=e},showDetail:e=>{s.value=!0,d.value=e},editItemData:d,editSubmit:e=>{},handleAdd:()=>{i.value=!0,d.value=null},detailVisible:s,partDetailVisible:p,detailPartId:u,showPartDetail:e=>{p.value=!0,u.value=e.partId}}}},F=c();e("data-v-cb7c5902");const w={class:"container"},B=m("查询"),E=m("添加批次"),U=m("编辑 "),j=m("删除");l();const A=F(((e,l,a,t,o,r)=>{const u=i("el-input"),n=i("el-form-item"),c=i("el-option"),b=i("el-select"),y=i("el-button"),k=i("el-form"),D=i("el-tag"),v=i("el-link"),h=i("BaseTable"),q=i("ProductAdd"),V=i("ProductDetail"),g=i("PartDetail");return d(),s("div",null,[p("div",w,[p(k,{inline:!0,model:t.query,class:"demo-form-inline"},{default:F((()=>[p(n,{label:"序号"},{default:F((()=>[p(u,{modelValue:t.query.address,"onUpdate:modelValue":l[1]||(l[1]=e=>t.query.address=e),placeholder:"序号"},null,8,["modelValue"])])),_:1}),p(n,{label:"任务号"},{default:F((()=>[p(u,{modelValue:t.query.address,"onUpdate:modelValue":l[2]||(l[2]=e=>t.query.address=e),placeholder:"任务号"},null,8,["modelValue"])])),_:1}),p(n,{label:"产品代号"},{default:F((()=>[p(u,{modelValue:t.query.address,"onUpdate:modelValue":l[3]||(l[3]=e=>t.query.address=e),placeholder:"产品代号"},null,8,["modelValue"])])),_:1}),p(n,{label:"零件代号"},{default:F((()=>[p(u,{modelValue:t.query.address,"onUpdate:modelValue":l[4]||(l[4]=e=>t.query.address=e),placeholder:"零件代号"},null,8,["modelValue"])])),_:1}),p(n,{label:"零件名称"},{default:F((()=>[p(u,{modelValue:t.query.address,"onUpdate:modelValue":l[5]||(l[5]=e=>t.query.address=e),placeholder:"零件名称"},null,8,["modelValue"])])),_:1}),p(n,{label:"调度备注"},{default:F((()=>[p(u,{modelValue:t.query.address,"onUpdate:modelValue":l[6]||(l[6]=e=>t.query.address=e),placeholder:"调度备注"},null,8,["modelValue"])])),_:1}),p(n,{label:"状态"},{default:F((()=>[p(b,{modelValue:t.query.address,"onUpdate:modelValue":l[7]||(l[7]=e=>t.query.address=e),placeholder:"状态",class:"handle-select mr10"},{default:F((()=>[p(c,{key:"1",label:"在线",value:"在线"}),p(c,{key:"2",label:"完结",value:"完结"})])),_:1},8,["modelValue"])])),_:1}),p(n,null,{default:F((()=>[p(y,{type:"primary",onClick:t.handleSearch},{default:F((()=>[B])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),p(y,{type:"primary",icon:"el-icon-plus",style:{"margin-bottom":"20px"},onClick:t.handleAdd},{default:F((()=>[E])),_:1},8,["onClick"]),p(h,{cols:t.columns},{status:F((e=>[p(D,{type:"成功"===e.scopeData.status?"success":"失败"===e.scopeData.status?"danger":""},{default:F((()=>[m(f(e.scopeData.status),1)])),_:2},1032,["type"])])),index:F((e=>[p(v,{href:"javascript:void(0)",type:"primary",onClick:l=>t.showDetail(e.scopeData)},{default:F((()=>[m(f(e.scopeData.index),1)])),_:2},1032,["onClick"])])),partId:F((e=>[p(v,{href:"javascript:void(0)",type:"primary",onClick:l=>t.showPartDetail(e.scopeData)},{default:F((()=>[m(f(e.scopeData.partId),1)])),_:2},1032,["onClick"])])),operation:F((e=>[p(y,{type:"text",icon:"el-icon-edit",onClick:l=>t.handleEdit(e.scopeData)},{default:F((()=>[U])),_:2},1032,["onClick"]),p(y,{type:"text",icon:"el-icon-delete",class:"red",onClick:l=>t.handleDelete(e.scopeData)},{default:F((()=>[j])),_:2},1032,["onClick"])])),_:1},8,["cols"])]),p(q,{visible:t.editVisible,onClose:l[8]||(l[8]=e=>t.editVisible=!1),itemData:t.editItemData,formItems:t.formItems,key:"product-edit",onDialogSubmit:t.editSubmit},null,8,["visible","itemData","formItems","onDialogSubmit"]),p(V,{visible:t.detailVisible,onClose:l[9]||(l[9]=e=>t.detailVisible=!1),key:"detail",itemData:t.editItemData},null,8,["visible","itemData"]),p(g,{visible:t.partDetailVisible,onClose:l[10]||(l[10]=e=>t.partDetailVisible=!1),key:"detail",partId:t.detailPartId},null,8,["visible","partId"])])}));N.render=A,N.__scopeId="data-v-cb7c5902";export default N;
