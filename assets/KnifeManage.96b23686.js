import{z as e,A as l,p as a,a as o,L as t,C as s,r as d,o as n,c as i,f as r,h as u,t as m,w as p}from"./vendor.a26bb249.js";import{_ as c,b,f as y}from"./MesuringTable.8506e34c.js";import{a as f}from"./ProductDetail.f4d86447.js";const g={components:{BaseTable:c,ProductAdd:b,ProductDetail:f},name:"product-manage",setup(){const a=e({address:"",name:"",pageIndex:1,pageSize:10}),o=l([]),d=l(0),n=()=>{y(a).then((e=>{o.value=e.list,d.value=e.pageTotal||50}))},i=l(!1);let r=l(null);const u=l(!1),m=l(!1),p=l(!1),c=l(!1),b=l(null);return{columns:[{label:"采购单位",prop:"company",slot:"company"},{label:"刀具名称",prop:"name"},{label:"规格型号",prop:"type",slot:"type"},{label:"库房存放点",prop:"storePlace"},{label:"库房剩余数量",prop:"restNum"},{label:"总购数量",prop:"totalNum"},{label:"归还后可二次使用数量",prop:"reuseNum"},{label:"废弃数量",prop:"disuseNum"}],formItems:[{label:"刀具编号",key:"knifeId",required:!0},{label:"名称",key:"name",required:!0},{label:"归属车间",key:"taskId",required:!0,type:"select",options:[{label:"一车间",value:"1"}]},{label:"总数量",key:"totalNum",required:!0}],query:a,tableData:o,pageTotal:d,editVisible:i,handleSearch:()=>{a.pageIndex=1,n()},handlePageChange:e=>{a.pageIndex=e,n()},handleDelete:e=>{t.confirm("确定要删除吗？","提示",{type:"warning"}).then((()=>{s.success("删除成功"),o.value.splice(e,1)})).catch((()=>{}))},handleEdit:e=>{i.value=!0,r.value=e},showDetail:e=>{r.value=e,u.value=!0},editItemData:r,editSubmit:e=>{console.log(e)},handleAdd:()=>{i.value=!0,r.value=null},detailVisible:u,handleLendingRecords:e=>{m.value=!0,r.value=e},lendingRecordsColumns:[{label:"出借人",prop:"lendUser"},{label:"出借时间",prop:"lendTime"},{label:"出借数量",prop:"lendnum"},{label:"当前状态",prop:"status"},{label:"备注",prop:"remark"}],lendingRecordsVisible:m,showAddLend:e=>{p.value=!0},addLendVisible:p,addLendFormItems:[{label:"出借人",key:"lendUser",required:!0},{label:"出借数量",key:"num",required:!0,type:"number"},{label:"备注",key:"remark",required:!0,type:"textarea"}],addLendSubmit:e=>{console.log(e)},showReturnMesuring:e=>{c.value=!0,b.value=e},returnMesuringVisible:c,returnMesuringItems:[{label:"归还数量",key:"num",required:!0,type:"number"}],returnMesuringSubmit:e=>{console.log(e)}}}},h=p();a("data-v-f8d2fbe6");const k={class:"container"},v=u("查询"),D=u("添加刀具"),V=u(" 借出 "),C=u("归还 "),I=u("删除"),_={class:"dialog-footer"},q=u("关 闭");o();const S=h(((e,l,a,o,t,s)=>{const p=d("el-input"),c=d("el-form-item"),b=d("el-button"),y=d("el-form"),f=d("el-tag"),g=d("el-link"),S=d("BaseTable"),w=d("ProductAdd"),L=d("el-dialog");return n(),i("div",null,[r("div",k,[r(y,{inline:!0,model:o.query,class:"demo-form-inline"},{default:h((()=>[r(c,{label:"采购单位"},{default:h((()=>[r(p,{modelValue:o.query.address,"onUpdate:modelValue":l[1]||(l[1]=e=>o.query.address=e),placeholder:"采购单位"},null,8,["modelValue"])])),_:1}),r(c,{label:"刀具名称"},{default:h((()=>[r(p,{modelValue:o.query.address,"onUpdate:modelValue":l[2]||(l[2]=e=>o.query.address=e),placeholder:"刀具名称"},null,8,["modelValue"])])),_:1}),r(c,{label:"规格型号"},{default:h((()=>[r(p,{modelValue:o.query.address,"onUpdate:modelValue":l[3]||(l[3]=e=>o.query.address=e),placeholder:"规格型号"},null,8,["modelValue"])])),_:1}),r(c,null,{default:h((()=>[r(b,{type:"primary",onClick:o.handleSearch},{default:h((()=>[v])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),r(b,{type:"primary",icon:"el-icon-plus",style:{"margin-bottom":"20px"},onClick:o.handleAdd},{default:h((()=>[D])),_:1},8,["onClick"]),r(S,{cols:o.columns,needOperation:!1,url:"/knife",onEdit:o.handleEdit},{status:h((e=>[r(f,{type:"成功"===e.scopeData.status?"success":"失败"===e.scopeData.status?"danger":""},{default:h((()=>[u(m(e.scopeData.status),1)])),_:2},1032,["type"])])),type:h((e=>[r(g,{href:"javascript:void(0)",type:"primary",onClick:l=>o.showDetail(e.scopeData)},{default:h((()=>[u(m(e.scopeData.type),1)])),_:2},1032,["onClick"])])),company:h((e=>[r(g,{href:"javascript:void(0)",type:"primary",onClick:l=>o.showDetail(e.scopeData)},{default:h((()=>[u(m(e.scopeData.company),1)])),_:2},1032,["onClick"])])),_:1},8,["cols","onEdit"])]),r(w,{visible:o.editVisible,onClose:l[4]||(l[4]=e=>o.editVisible=!1),itemData:o.editItemData,formItems:o.formItems,onDialogSubmit:o.editSubmit},null,8,["visible","itemData","formItems","onDialogSubmit"]),r(L,{title:`采购记录 - ${o.editItemData&&o.editItemData.company}`,modelValue:o.lendingRecordsVisible,"onUpdate:modelValue":l[6]||(l[6]=e=>o.lendingRecordsVisible=e),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"60%"},{footer:h((()=>[r("span",_,[r(b,{onClick:l[5]||(l[5]=e=>o.lendingRecordsVisible=!1)},{default:h((()=>[q])),_:1})])])),default:h((()=>[r(b,{type:"primary",icon:"el-icon-plus",style:{"margin-bottom":"20px"},onClick:o.showAddLend},{default:h((()=>[V])),_:1},8,["onClick"]),r(S,{cols:o.lendingRecordsColumns,url:"/lendRecords"},{operation:h((e=>[r(b,{type:"text",icon:"el-icon-download",class:"color-success",onClick:l=>o.showReturnMesuring(e.scopeData)},{default:h((()=>[C])),_:2},1032,["onClick"]),r(b,{type:"text",icon:"el-icon-delete",class:"color-danger",onClick:l=>o.handleDelete(e.scopeData)},{default:h((()=>[I])),_:2},1032,["onClick"])])),_:1},8,["cols"])])),_:1},8,["title","modelValue"]),r(w,{visible:o.addLendVisible,onClose:l[7]||(l[7]=e=>o.addLendVisible=!1),formItems:o.addLendFormItems,propTitle:"借出刀具",onDialogSubmit:o.addLendSubmit},null,8,["visible","formItems","onDialogSubmit"]),r(w,{visible:o.returnMesuringVisible,onClose:l[8]||(l[8]=e=>o.returnMesuringVisible=!1),formItems:o.returnMesuringItems,propTitle:"归还刀具",onDialogSubmit:o.returnMesuringSubmit},null,8,["visible","formItems","onDialogSubmit"])])}));g.render=S,g.__scopeId="data-v-f8d2fbe6";export default g;
