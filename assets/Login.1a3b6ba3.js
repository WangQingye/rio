import{e,u as s,D as a,j as r,p as o,a as l,i as t,r as u,o as m,c as n,f as d,H as p,w as i,h as c}from"./vendor.cfd906a5.js";import{l as f}from"./user.181d4cce.js";import"./index.8da61348.js";const g={setup(){const o=e(),l=s(),u=a({username:"",password:""}),m=r(null);return l.commit("clearTags"),{param:u,rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},login:m,submitForm:async()=>{m.value.validate((async e=>{if(!e)return t.error("登录成功"),!1;{let e=await f({username:u.username,password:u.password});console.log(e),t.success("登录成功"),l.commit("setUserInfo",e),"SYS_ADMIN"===e.authorities[0].authority?(console.log("aaa"),o.push("/")):o.push("/work-list")}}))}}}},w=i();o("data-v-0cfb39e9");const b={class:"login-wrap"},v={class:"ms-login"},_=d("div",{class:"ms-title"},"瑞奥机械",-1),h={class:"login-btn"},y=c("登录");l();const V=w(((e,s,a,r,o,l)=>{const t=u("el-button"),i=u("el-input"),c=u("el-form-item"),f=u("el-form");return m(),n("div",b,[d("div",v,[_,d(f,{model:r.param,rules:r.rules,ref:"login","label-width":"0px",class:"ms-content"},{default:w((()=>[d(c,{prop:"username"},{default:w((()=>[d(i,{modelValue:r.param.username,"onUpdate:modelValue":s[1]||(s[1]=e=>r.param.username=e),placeholder:"username"},{prepend:w((()=>[d(t,{icon:"el-icon-user"})])),_:1},8,["modelValue"])])),_:1}),d(c,{prop:"password"},{default:w((()=>[d(i,{type:"password",placeholder:"password",modelValue:r.param.password,"onUpdate:modelValue":s[2]||(s[2]=e=>r.param.password=e),onKeyup:s[3]||(s[3]=p((e=>r.submitForm()),["enter"]))},{prepend:w((()=>[d(t,{icon:"el-icon-lock"})])),_:1},8,["modelValue"])])),_:1}),d("div",h,[d(t,{type:"primary",onClick:s[4]||(s[4]=e=>r.submitForm())},{default:w((()=>[y])),_:1})])])),_:1},8,["model","rules"])])])}));g.render=V,g.__scopeId="data-v-0cfb39e9";export default g;
