import{i as e,j as l,k as o,b as a,D as i,B as t,p as d,a as n,L as s,E as r,r as u,o as c,c as m,f as p,h as b,t as y,w as f}from"./vendor.783501fb.js";import{f as k}from"./index.5a2f37f4.js";import{_ as g,b as h}from"./MesuringTable.2c9644ae.js";import{a as V}from"./ProductDetail.61e77cfb.js";const D={components:{BaseTable:g,ProductAdd:h,ProductDetail:V},name:"product-manage",setup(){const d=e({}),n=l(),u=e([]),c=e([]),m=()=>{k("/toolTypes").then((e=>{d.value=e.toolTypes.find((e=>e.toolId==n.query.id)),d.value.toolProps.forEach((e=>{let l={label:e.label,prop:e.key},o={label:e.label,key:e.key};"采购单位"==e.label&&(l.slot=e.key),u.value.push(l),c.value.push(o)}))}))};o((()=>{m()}));const p=a((()=>n.query.id));i(p,(()=>{m()}));const b=t({address:"",name:"",pageIndex:1,pageSize:10}),y=e([]),f=e(0),g=e(!1);let h=e(null);const V=e(!1),D=e(!1),v=e(!1),C=e(!1),_=e(null),I=e(!1),R=e=>{I.value=!0,h.value=e},S=e({knifeName:"",knifeType:""}),T=e(!1);return{toolData:d,columns:u,formItems:c,query:b,tableData:y,pageTotal:f,editVisible:g,handleSearch:()=>{b.pageIndex=1,k(b).then((e=>{y.value=e.list,f.value=e.pageTotal||50}))},handleDelete:e=>{s.confirm("确定要删除吗？","提示",{type:"warning"}).then((()=>{r.success("删除成功"),y.value.splice(e,1)})).catch((()=>{}))},handleEdit:e=>{g.value=!0,h.value=e},showDetail:e=>{h.value=e,V.value=!0},editItemData:h,editSubmit:e=>{console.log(e)},handleAdd:()=>{g.value=!0,h.value=null},detailVisible:V,handleLendingRecords:e=>{D.value=!0,h.value=e},lendingRecordsColumns:[{label:"领用人",prop:"lendUser"},{label:"领用日期",prop:"lendTime"},{label:"领用数量",prop:"lendnum"},{label:"归还数量",prop:"returnNum"},{label:"归还时间",prop:"returnTime"},{label:"备注",prop:"remark"}],lendingRecordsVisible:D,showAddLend:e=>{v.value=!0},addLendVisible:v,addLendFormItems:[{label:"领用人",key:"lendUser",required:!0},{label:"领用数量",key:"num",required:!0,type:"number"},{label:"备注",key:"remark",required:!0,type:"textarea"}],addLendSubmit:e=>{console.log(e)},showReturnMesuring:e=>{C.value=!0,_.value=e},returnMesuringVisible:C,returnMesuringItems:[{label:"归还数量",key:"num",required:!0,type:"number"}],returnMesuringSubmit:e=>{console.log(e)},handBuyRecords:R,handBuyRecords:R,buyQuery:S,handleBuySearch:()=>{},addBuyVisible:T,showAddBuy:e=>{T.value=!0},addBuySubmit:()=>{console.log()},buyRecordsVisible:I,buyRecordsColumns:[{label:"采购单位",prop:"company"},{label:"名称",prop:"toolName"},{label:"规格型号",prop:"type"},{label:"采购时间",prop:"buyTime"},{label:"采购数量",prop:"buyNum"},{label:"采购单价",prop:"price"},{label:"回厂时间",prop:"backTime"}],addBuyFormItems:[{label:"采购单位",key:"company",required:!0},{label:"刀具名称",key:"toolName",required:!0},{label:"规格型号",key:"type"},{label:"采购时间",key:"buyTime",required:!0},{label:"采购数量",key:"buyNum",required:!0},{label:"采购单价",key:"price",required:!0},{label:"回厂时间",key:"backTime",required:!0}]}}},v=f();d("data-v-789dad2a");const C={class:"container"},_=b("查询"),I=b("领用记录 "),R=b("编辑 "),S=b("删除"),T=b(" 领用 "),q=b("归还 "),B=b("删除"),x={class:"dialog-footer"},w=b("关 闭"),L=b("查询"),M=b(" 添加记录 "),N=b("编辑 "),A=b("删除"),U={class:"dialog-footer"},E=b("关 闭");n();const j=v(((e,l,o,a,i,t)=>{const d=u("el-input"),n=u("el-form-item"),s=u("el-button"),r=u("el-form"),f=u("el-link"),k=u("BaseTable"),g=u("ProductAdd"),h=u("el-dialog");return c(),m("div",null,[p("div",C,[p(r,{inline:!0,model:a.query,class:"demo-form-inline"},{default:v((()=>[p(n,{label:"名称"},{default:v((()=>[p(d,{modelValue:a.query.address,"onUpdate:modelValue":l[1]||(l[1]=e=>a.query.address=e),placeholder:"名称"},null,8,["modelValue"])])),_:1}),p(n,{label:"规格型号"},{default:v((()=>[p(d,{modelValue:a.query.address,"onUpdate:modelValue":l[2]||(l[2]=e=>a.query.address=e),placeholder:"规格型号"},null,8,["modelValue"])])),_:1}),p(n,null,{default:v((()=>[p(s,{type:"primary",onClick:a.handleSearch},{default:v((()=>[_])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),p(s,{type:"primary",icon:"el-icon-plus",style:{"margin-bottom":"20px"},onClick:a.handleAdd},{default:v((()=>[b(y(`添加${a.toolData.toolName}`),1)])),_:1},8,["onClick"]),p(k,{cols:a.columns,url:"/toolDetail",onEdit:a.handleEdit},{prop1:v((e=>[p(f,{href:"javascript:void(0)",type:"primary",onClick:l=>a.handBuyRecords(e.scopeData)},{default:v((()=>[b(y(e.scopeData.prop1),1)])),_:2},1032,["onClick"])])),operation:v((e=>[p(s,{type:"text",icon:"el-icon-document",class:"color-success",onClick:l=>a.handleLendingRecords(e.scopeData)},{default:v((()=>[I])),_:2},1032,["onClick"]),p(s,{type:"text",icon:"el-icon-edit",style:{"margin-left":"0"},onClick:l=>a.handleEdit(e.scopeData)},{default:v((()=>[R])),_:2},1032,["onClick"]),p(s,{type:"text",icon:"el-icon-delete",class:"color-danger",onClick:l=>a.handleDelete(e.scopeData)},{default:v((()=>[S])),_:2},1032,["onClick"])])),_:1},8,["cols","onEdit"])]),p(g,{visible:a.editVisible,onClose:l[3]||(l[3]=e=>a.editVisible=!1),itemData:a.editItemData,formItems:a.formItems,onDialogSubmit:a.editSubmit},null,8,["visible","itemData","formItems","onDialogSubmit"]),p(h,{title:`领用记录 - ${a.editItemData&&a.editItemData.prop2}`,modelValue:a.lendingRecordsVisible,"onUpdate:modelValue":l[7]||(l[7]=e=>a.lendingRecordsVisible=e),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"60%"},{footer:v((()=>[p("span",x,[p(s,{onClick:l[4]||(l[4]=e=>a.lendingRecordsVisible=!1)},{default:v((()=>[w])),_:1})])])),default:v((()=>[p(s,{type:"primary",icon:"el-icon-plus",style:{"margin-bottom":"20px"},onClick:a.showAddLend},{default:v((()=>[T])),_:1},8,["onClick"]),p(k,{cols:a.lendingRecordsColumns,url:"/lendRecords"},{operation:v((e=>[p(s,{type:"text",icon:"el-icon-download",class:"color-success",onClick:l=>a.showReturnMesuring(e.scopeData)},{default:v((()=>[q])),_:2},1032,["onClick"]),p(s,{type:"text",icon:"el-icon-delete",class:"color-danger",onClick:l=>a.handleDelete(e.scopeData)},{default:v((()=>[B])),_:2},1032,["onClick"])])),_:1},8,["cols"]),p(g,{visible:a.addLendVisible,onClose:l[5]||(l[5]=e=>a.addLendVisible=!1),formItems:a.addLendFormItems,propTitle:"领用工具",onDialogSubmit:a.addLendSubmit},null,8,["visible","formItems","onDialogSubmit"]),p(g,{visible:a.returnMesuringVisible,onClose:l[6]||(l[6]=e=>a.returnMesuringVisible=!1),formItems:a.returnMesuringItems,propTitle:"归还工具",onDialogSubmit:a.returnMesuringSubmit},null,8,["visible","formItems","onDialogSubmit"])])),_:1},8,["title","modelValue"]),p(h,{title:`采购记录 - ${a.editItemData&&a.editItemData.prop1}`,modelValue:a.buyRecordsVisible,"onUpdate:modelValue":l[12]||(l[12]=e=>a.buyRecordsVisible=e),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"80%"},{footer:v((()=>[p("span",U,[p(s,{onClick:l[10]||(l[10]=e=>a.buyRecordsVisible=!1)},{default:v((()=>[E])),_:1})])])),default:v((()=>[p(r,{inline:!0,model:a.buyQuery,class:"demo-form-inline"},{default:v((()=>[p(n,{label:"工具名称"},{default:v((()=>[p(d,{modelValue:a.buyQuery.knifeName,"onUpdate:modelValue":l[8]||(l[8]=e=>a.buyQuery.knifeName=e),placeholder:"工具名称"},null,8,["modelValue"])])),_:1}),p(n,{label:"规格型号"},{default:v((()=>[p(d,{modelValue:a.buyQuery.knifeType,"onUpdate:modelValue":l[9]||(l[9]=e=>a.buyQuery.knifeType=e),placeholder:"规格型号"},null,8,["modelValue"])])),_:1}),p(n,null,{default:v((()=>[p(s,{type:"primary",onClick:a.handleBuySearch},{default:v((()=>[L])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),p(s,{type:"primary",icon:"el-icon-plus",style:{"margin-bottom":"20px"},onClick:a.showAddBuy},{default:v((()=>[M])),_:1},8,["onClick"]),p(k,{cols:a.buyRecordsColumns,url:"/knifeBuyRecords"},{operation:v((e=>[p(s,{type:"text",icon:"el-icon-download",class:"color-success",onClick:l=>a.showReturnMesuring(e.scopeData)},{default:v((()=>[N])),_:2},1032,["onClick"]),p(s,{type:"text",icon:"el-icon-delete",class:"color-danger",onClick:l=>a.handleDelete(e.scopeData)},{default:v((()=>[A])),_:2},1032,["onClick"])])),_:1},8,["cols"]),p(g,{visible:a.addBuyVisible,onClose:l[11]||(l[11]=e=>a.addBuyVisible=!1),formItems:a.addBuyFormItems,propTitle:"添加购买记录",onDialogSubmit:a.addBuySubmit},null,8,["visible","formItems","onDialogSubmit"])])),_:1},8,["title","modelValue"])])}));D.render=j,D.__scopeId="data-v-789dad2a";export default D;
