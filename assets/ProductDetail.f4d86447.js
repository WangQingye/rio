import{b as e,_ as a,a as l}from"./MesuringTable.8506e34c.js";import{p as t,a as i,A as s,r as o,o as r,c as d,f as u,t as n,F as m,j as p,g as c,w as b,h as y,z as k,b as f,B as T}from"./vendor.a26bb249.js";const g={components:{ProductAdd:e},props:{prices:{type:Object,default:()=>({})},fromIndex:{type:String},isInIndex:{type:Boolean}},emits:["dialog-submit"],name:"process-price-tag",setup(e,{emit:a}){console.log(e.prices);const l=s(!1),t=s(null);return{priceItems:[{label:"车工序价格",key:"cPrice",required:!0},{label:"铣工序价格",key:"xPrice",required:!0},{label:"钳工序价格",key:"qPrice",required:!0}],priceEditVisible:l,editItemData:t,handleEdit:a=>{l.value=!0,t.value=e.prices},editSubmit:()=>{}}}},I=b();t("data-v-b1e6238c");const h={style:{"font-weight":"bold"}},D={style:{"font-weight":"bold"}},q=y("填报价格");i();const v=I(((e,a,l,t,i,s)=>{const b=o("el-form-item"),y=o("el-button"),k=o("el-form"),f=o("ProductAdd");return r(),d(m,null,[u(k,{"label-width":"100px",inline:""},{default:I((()=>[u(b,{style:{width:"20%"},label:"序号 : "},{default:I((()=>[u("span",h,n(l.fromIndex),1)])),_:1}),(r(!0),d(m,null,p(t.priceItems,(e=>(r(),d(b,{style:{width:"20%"},key:e.key,label:`${e.label} : `},{default:I((()=>[u("span",D,n(l.prices[e.key]||"未填报"),1)])),_:2},1032,["label"])))),128)),u(b,null,{default:I((()=>[l.isInIndex?(r(),d(y,{key:0,type:"primary",size:"small",onClick:t.handleEdit},{default:I((()=>[q])),_:1},8,["onClick"])):c("",!0)])),_:1})])),_:1}),u(f,{visible:t.priceEditVisible,onClose:a[1]||(a[1]=e=>t.priceEditVisible=!1),itemData:t.editItemData,title:"填报价格",formItems:t.priceItems,key:"product-edit",onDialogSubmit:t.editSubmit},null,8,["visible","itemData","formItems","onDialogSubmit"])],64)}));g.render=v,g.__scopeId="data-v-b1e6238c";const _={components:{BaseTable:a,MesuringTable:l,ProcessPriceTag:g,ProductAdd:e},props:{visible:{type:Boolean,required:!0},itemData:{type:Object}},emits:["close","dialog-submit"],name:"product-add",setup(e,{emit:a}){const l=k({}),t=s("process"),i=f((()=>e.visible));T(i,(()=>{1==i.value?e.itemData&&Object.keys(e.itemData).map((a=>{l[a]=e.itemData[a]})):Object.keys(l).map((e=>{delete l[e]}))}));const o=s(!1),r=s(!1);return{formItems:[{label:"序号",key:"index",required:!0},{label:"任务号",key:"taskId",required:!0},{label:"产品代号",key:"productId",required:!0},{label:"零件代号",key:"partId",required:!0},{label:"名称",key:"name",required:!0},{label:"图纸工序",key:"blueprintProcess",required:!0},{label:"本厂实际工序",key:"factoryProcess",required:!0},{label:"回厂数量",key:"backFactoryNum",required:!0},{label:"回厂日期",key:"backFactoryTime",required:!0,type:"date"},{label:"调度备注",key:"dispatchRemark",required:!0},{label:"甲方要求回厂时间",key:"customerBackFactoryTime",required:!0,type:"date"},{label:"状态",key:"status",required:!0},{label:"备注",key:"remark",required:!0},{label:"出厂数量",key:"outFactoryNum",required:!0},{label:"出厂时间",key:"outFactoryTime",required:!0,type:"date"},{label:"最终甲方检验合格数",key:"finalCustomerQualifiedNum",required:!0}],stepColumns:[{label:"工序",prop:"stepName"},{label:"操作者",prop:"userName",slot:"userName"},{label:"当前状态",prop:"status"},{label:"操作设备",prop:"equipment"},{label:"开工时间",prop:"startTime"},{label:"完工时间",prop:"finishTime"},{label:"运行时间",prop:"runTime",slot:"runTime"},{label:"最高记录",prop:"highScore"},{label:"工序单价（元）",prop:"stepPrice"}],meusringColumns:[{label:"量具名称",prop:"mesuringName"},{label:"量具规格",prop:"mesuringSpecs"},{label:"量具编号",prop:"mesuringId"},{label:"归属序号",prop:"fromIndex"},{label:"数量",prop:"num"},{label:"状态",prop:"status"},{label:"入库时间",prop:"inTime"},{label:"归还时间",prop:"returnTime"}],close:()=>{a("close")},activeName:t,saveEdit:()=>{a("dialog-submit",l)},form:l,dispathTaskVisible:o,dispathTaskSubmit:()=>{},editRunTimeVisible:r,editRunTimeSubmit:()=>{},showDispathTask:()=>{o.value=!0},showEditRunTime:()=>{r.value=!0}}}},x=b();t("data-v-0ccd23c3");const C={key:0},S=y("分配任务"),V={key:0},N=y("填报工时"),P={class:"dialog-footer"},w=y("关 闭");i();const E=x(((e,a,l,t,i,s)=>{const m=o("ProcessPriceTag"),p=o("el-button"),b=o("BaseTable"),y=o("ProductAdd"),k=o("el-tab-pane"),f=o("MesuringTable"),T=o("el-tabs"),g=o("el-dialog");return r(),d(g,{"append-to-body":!0,title:`序号详情 - ${l.itemData&&l.itemData.index}`,modelValue:l.visible,"onUpdate:modelValue":a[4]||(a[4]=e=>l.visible=e),"destroy-on-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"60%"},{footer:x((()=>[u("span",P,[u(p,{onClick:t.close},{default:x((()=>[w])),_:1},8,["onClick"])])])),default:x((()=>[u(T,{modelValue:t.activeName,"onUpdate:modelValue":a[3]||(a[3]=e=>t.activeName=e)},{default:x((()=>[u(k,{label:"生产过程",name:"process"},{default:x((()=>[u(m,{fromIndex:l.itemData.index,isInIndex:!0},null,8,["fromIndex"]),u(b,{cols:t.stepColumns,url:"/step",needOperation:!1},{userName:x((e=>[e.scopeData.userName?(r(),d("span",C,n(e.scopeData.userName),1)):(r(),d(p,{key:1,type:"text",icon:"el-icon-collection-tag",onClick:t.showDispathTask},{default:x((()=>[S])),_:1},8,["onClick"]))])),runTime:x((e=>[e.scopeData.runTime?(r(),d("span",V,n(e.scopeData.runTime),1)):c("",!0),!e.scopeData.runTime&&e.scopeData.finishTime?(r(),d(p,{key:1,type:"text",icon:"el-icon-time",onClick:t.showEditRunTime},{default:x((()=>[N])),_:1},8,["onClick"])):c("",!0)])),_:1},8,["cols"]),u(y,{visible:t.dispathTaskVisible,onClose:a[1]||(a[1]=e=>t.dispathTaskVisible=!1),title:"分配任务",formItems:[{label:"操作者",key:"userName",required:!0}],key:"product-edit",onDialogSubmit:t.dispathTaskSubmit},null,8,["visible","onDialogSubmit"]),u(y,{visible:t.editRunTimeVisible,onClose:a[2]||(a[2]=e=>t.editRunTimeVisible=!1),title:"填报工时",formItems:[{label:"运行时间",key:"runTime",required:!0}],key:"product-edit",onDialogSubmit:t.editRunTimeSubmit},null,8,["visible","onDialogSubmit"])])),_:1}),u(k,{label:"量具情况",name:"mesuring"},{default:x((()=>[u(f,{taskIndex:"111"})])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["title","modelValue"])}));_.render=E,_.__scopeId="data-v-0ccd23c3";export{g as _,_ as a};
