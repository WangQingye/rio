var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l;import{i as c,b as p,p as n,h as u,L as d,w as i,r as m,o as b,c as f,e as y,l as h,t as k,q as D,g}from"./vendor.86c6712b.js";import{_ as v}from"./MesuringTable.4017a123.js";import{_ as w,a as S}from"./index.b3e4d661.js";import{a as _}from"./ProductDetail.c646594c.js";import{p as C}from"./worklist.f70fa175.js";const O={components:{BaseTable:v,ProductAdd:w,ProductDetail:_,UserSelect:S},name:"work-list",props:{userId:{type:String,default:void 0}},setup(e){const n=c({partName:"",productCode:"",partCode:"",user:"",timeRange:[],checkStatus:""}),u=p({}),m=()=>{const e=(c=((e,a)=>{for(var t in a||(a={}))r.call(a,t)&&s(e,t,a[t]);if(l)for(var t of l(a))o.call(a,t)&&s(e,t,a[t]);return e})({},n),p={timeRange:void 0,checkDateStart:n.timeRange&&n.timeRange[0]||void 0,checkDateEnd:n.timeRange&&n.timeRange[1]||void 0},a(c,t(p)));var c,p;u.value.refresh(e)};return{columns:[{label:"产品代号",prop:"productCode"},{label:"零件代号",prop:"partCode"},{label:"零件名称",prop:"partName"},{label:"工序",prop:"workingName"},{label:"操作者",prop:"username"},{label:"操作设备",prop:"deviceName"},{label:"状态",prop:"status",slot:"status"},{label:"要求完工时间",prop:"needFinalDate"},{label:"开工时间",prop:"startDate"},{label:"完工时间",prop:"finalDate"},{label:"接受产品数量",prop:"acceptAmt"},{label:"合格产品数量",prop:"qualAmt"},{label:"工序单价（元）",prop:"price"},{label:"预计工资",prop:"checkWages"},{label:"结账状态",prop:"checkStatus",slot:"checkStatus"},{label:"结账时间",prop:"checkDate"}],query:n,handlePay:e=>{d.confirm("确定结账完成吗？","提示",{type:"warning"}).then((async()=>{await C({workId:e.id}),i.success("操作成功"),m()})).catch((()=>{}))},handleSearch:m,worklistTable:u}}},N=g();n("data-v-deea9b1c");const R=h("查询"),j=h("结账");u();const q=N(((e,a,t,l,r,o)=>{const s=m("UserSelect"),c=m("el-form-item"),p=m("el-date-picker"),n=m("el-option"),u=m("el-select"),d=m("el-button"),i=m("el-form"),g=m("el-tag"),v=m("BaseTable");return b(),f("div",null,[y("div",{class:[t.userId?"":"container"]},[y(i,{inline:!0,model:l.query,class:"demo-form-inline"},{default:N((()=>[y(c,{label:"用户姓名"},{default:N((()=>[y(s,{userData:l.query.user,"onUpdate:userData":a[1]||(a[1]=e=>l.query.user=e),style:{width:"200px"}},null,8,["userData"])])),_:1}),y(c,{label:"结账时间"},{default:N((()=>[y(p,{modelValue:l.query.timeRange,"onUpdate:modelValue":a[2]||(a[2]=e=>l.query.timeRange=e),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])])),_:1}),y(c,{label:"结账状态"},{default:N((()=>[y(u,{modelValue:l.query.checkStatus,"onUpdate:modelValue":a[3]||(a[3]=e=>l.query.checkStatus=e),placeholder:"结账状态",clearable:"",class:"handle-select mr10"},{default:N((()=>[y(n,{label:"未结账",value:"CHECK"}),y(n,{label:"已结账",value:"CHECKED"})])),_:1},8,["modelValue"])])),_:1}),y(c,null,{default:N((()=>[y(d,{type:"primary",onClick:l.handleSearch},{default:N((()=>[R])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),y(v,{cols:l.columns,needExport:"",ref:"worklistTable",url:"/work-shop-manage/work/pages"},{status:N((e=>[y(g,{type:"NORMAL"===e.scopeData.status?"warning":"RUNNING"===e.scopeData.status?"primary":"success"},{default:N((()=>[h(k({NORMAL:"未开工",RUNNING:"已开工",CLOSED:"已完工"}[e.scopeData.status]),1)])),_:2},1032,["type"])])),checkStatus:N((e=>[y(g,{type:"未结账"===e.scopeData.checkStatus?"warning":"success"},{default:N((()=>[h(k(e.scopeData.checkStatus),1)])),_:2},1032,["type"])])),operation:N((e=>["CLOSED"==e.scopeData.status&&"未结账"===e.scopeData.checkStatus?(b(),f(d,{key:0,type:"success",icon:"el-icon-coin",onClick:a=>l.handlePay(e.scopeData)},{default:N((()=>[j])),_:2},1032,["onClick"])):D("",!0)])),_:1},8,["cols"])],2)])}));O.render=q,O.__scopeId="data-v-deea9b1c";export default O;
