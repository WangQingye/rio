import{p as e,a,B as l,i as t,b as o,D as r,r as d,o as i,c as s,f as p,F as u,l as n,w as c,h as m,L as b,E as y,t as k}from"./vendor.783501fb.js";import{f}from"./index.cc8f9e19.js";import{_ as D,a as v,b as h}from"./MesuringTable.525c0010.js";import{_ as V,a as q}from"./ProductDetail.b6d0352e.js";const I={components:{BaseTable:D,MesuringTable:v,ProcessPriceTag:V,ProductAdd:h},props:{visible:{type:Boolean,required:!0},partId:{type:String}},emits:["close","dialog-submit"],name:"product-add",setup(e,{emit:a}){const d=l({}),i=t("process"),s=o((()=>e.visible));r(s,(()=>{1==s.value?e.itemData&&Object.keys(e.itemData).map((a=>{d[a]=e.itemData[a]})):Object.keys(d).map((e=>{delete d[e]}))}));const p=t(!1),u=t(null);return{stepColumns:[{label:"工序",prop:"stepName"},{label:"操作者",prop:"userName"},{label:"当前状态",prop:"status"},{label:"操作设备",prop:"equipment"},{label:"开工时间",prop:"startTime"},{label:"完工时间",prop:"finishTime"},{label:"运行时间",prop:"runTime"},{label:"最高记录",prop:"highScore"},{label:"工序单价（元）",prop:"stepPrice"}],meusringColumns:[{label:"量具名称",prop:"mesuringName"},{label:"量具规格",prop:"mesuringSpecs"},{label:"量具编号",prop:"mesuringId"},{label:"归属序号",prop:"fromIndex"},{label:"数量",prop:"num"},{label:"状态",prop:"status"},{label:"入库时间",prop:"inTime"},{label:"归还时间",prop:"returnTime"}],partStepColumns:[{label:"工序",prop:"stepName"},{label:"操作设备",prop:"equipment"},{label:"工序单价",prop:"stepPrice"}],editPartStepFormItems:[{label:"工序",key:"stepName",required:!0},{label:"操作设备",key:"equipment",required:!0}],close:()=>{a("close")},activeName:i,saveEdit:()=>{a("dialog-submit",d)},form:d,partStepEditVisible:p,handleAddStep:()=>{p.value=!0,u.value=null},handleEditStep:e=>{p.value=!0,u.value=e},handleDeleteStep:e=>{},editPartStepItemData:u,editPartStepSubmit:e=>{}}}},g=c();e("data-v-a55b34ba");const _=m("添加工序"),C=m("编辑 "),S=m("删除"),P={class:"dialog-footer"},T=m("关 闭");a();const x=g(((e,a,l,t,o,r)=>{const c=d("ProcessPriceTag"),m=d("BaseTable"),b=d("el-card"),y=d("el-tab-pane"),k=d("el-button"),f=d("ProductAdd"),D=d("el-tabs"),v=d("el-dialog");return i(),s(v,{"append-to-body":!0,title:`零件生产详情 - ${l.partId}`,modelValue:l.visible,"onUpdate:modelValue":a[3]||(a[3]=e=>l.visible=e),"destroy-on-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"60%"},{footer:g((()=>[p("span",P,[p(k,{onClick:t.close},{default:g((()=>[T])),_:1},8,["onClick"])])])),default:g((()=>[p(D,{modelValue:t.activeName,"onUpdate:modelValue":a[2]||(a[2]=e=>t.activeName=e)},{default:g((()=>[p(y,{label:"生产情况",name:"process",class:"part-info"},{default:g((()=>[(i(),s(u,null,n(3,(e=>p(b,{class:"part-card",key:e,style:{padding:"0","margin-bottom":"10px"}},{default:g((()=>[p(c,{fromIndex:"21-9-1"}),p(m,{noBorder:!0,cols:t.stepColumns,url:"/step",needOperation:!1},null,8,["cols"])])),_:2},1024))),64))])),_:1}),p(y,{label:"工序设置",name:"mesuring"},{default:g((()=>[p(k,{type:"primary",icon:"el-icon-plus",style:{"margin-bottom":"10px"},onClick:t.handleAddStep},{default:g((()=>[_])),_:1},8,["onClick"]),p(m,{cols:t.partStepColumns,url:"/partStep"},{operation:g((e=>[p(k,{type:"text",icon:"el-icon-edit",onClick:a=>t.handleEditStep(e.scopeData)},{default:g((()=>[C])),_:2},1032,["onClick"]),p(k,{type:"text",icon:"el-icon-delete",class:"color-warning",onClick:a=>t.handleDeleteStep(e.scopeData)},{default:g((()=>[S])),_:2},1032,["onClick"])])),_:1},8,["cols"]),p(f,{visible:t.partStepEditVisible,onClose:a[1]||(a[1]=e=>t.partStepEditVisible=!1),title:"工序设置",itemData:t.editPartStepItemData,formItems:t.editPartStepFormItems,key:"product-edit",onDialogSubmit:t.editPartStepSubmit},null,8,["visible","itemData","formItems","onDialogSubmit"])])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["title","modelValue"])}));I.render=x,I.__scopeId="data-v-a55b34ba";const N={components:{BaseTable:D,ProductAdd:h,ProductDetail:q,PartDetail:I},name:"product-manage",setup(){const e=l({address:"",name:"",pageIndex:1,pageSize:10}),a=t([]),o=t(0),r=()=>{f(e).then((e=>{a.value=e.list,o.value=e.pageTotal||50}))};r();const d=t(!1),i=t(null),s=t(!1),p=t(!1),u=t("");return{columns:[{label:"序号",prop:"index",slot:"index"},{label:"任务号",prop:"taskId"},{label:"产品代号",prop:"productId"},{label:"零件代号",prop:"partId",slot:"partId"},{label:"名称",prop:"name"},{label:"图纸工序",prop:"blueprintProcess"},{label:"本厂实际工序",prop:"factoryProcess"},{label:"回厂数量",prop:"backFactoryNum"},{label:"回厂日期",prop:"backFactoryTime"},{label:"调度备注",prop:"dispatchRemark"},{label:"甲方要求回厂时间",prop:"customerBackFactoryTime"},{label:"状态",prop:"status",slot:"status"},{label:"备注",prop:"remark"},{label:"出厂数量",prop:"outFactoryNum"},{label:"出厂时间",prop:"outFactoryTime"},{label:"最终甲方检验合格数",prop:"finalCustomerQualifiedNum"}],formItems:[{label:"序号",key:"index",required:!0},{label:"任务号",key:"taskId",required:!0},{label:"产品代号",key:"productId",required:!0},{label:"零件代号",key:"partId",required:!0},{label:"名称",key:"name",required:!0},{label:"图纸工序",key:"blueprintProcess",required:!0},{label:"本厂实际工序",key:"factoryProcess",required:!0},{label:"回厂数量",key:"backFactoryNum",required:!0},{label:"回厂日期",key:"backFactoryTime",required:!0,type:"date"},{label:"调度备注",key:"dispatchRemark",required:!0},{label:"甲方要求回厂时间",key:"customerBackFactoryTime",required:!0,type:"date"},{label:"状态",key:"status",required:!0},{label:"备注",key:"remark",required:!0},{label:"出厂数量",key:"outFactoryNum",required:!0},{label:"出厂时间",key:"outFactoryTime",required:!0,type:"date"},{label:"最终甲方检验合格数",key:"finalCustomerQualifiedNum",required:!0}],query:e,tableData:a,pageTotal:o,editVisible:d,handleSearch:()=>{e.pageIndex=1,r()},handlePageChange:a=>{e.pageIndex=a,r()},handleDelete:e=>{b.confirm("确定要删除吗？","提示",{type:"warning"}).then((()=>{y.success("删除成功"),a.value.splice(e,1)})).catch((()=>{}))},handleEdit:e=>{d.value=!0,i.value=e},showDetail:e=>{s.value=!0,i.value=e},editItemData:i,editSubmit:e=>{},handleAdd:()=>{d.value=!0,i.value=null},detailVisible:s,partDetailVisible:p,detailPartId:u,showPartDetail:e=>{p.value=!0,u.value=e.partId}}}},F=c();e("data-v-3bbe85a8");const B={class:"container"},E=m("查询"),U=m("添加批次"),j=m("编辑 "),w=m("删除");a();const A=F(((e,a,l,t,o,r)=>{const u=d("el-input"),n=d("el-form-item"),c=d("el-option"),b=d("el-select"),y=d("el-button"),f=d("el-form"),D=d("el-tag"),v=d("el-link"),h=d("BaseTable"),V=d("ProductAdd"),q=d("ProductDetail"),I=d("PartDetail");return i(),s("div",null,[p("div",B,[p(f,{inline:!0,model:t.query,class:"demo-form-inline"},{default:F((()=>[p(n,{label:"序号"},{default:F((()=>[p(u,{modelValue:t.query.address,"onUpdate:modelValue":a[1]||(a[1]=e=>t.query.address=e),placeholder:"序号"},null,8,["modelValue"])])),_:1}),p(n,{label:"任务号"},{default:F((()=>[p(u,{modelValue:t.query.address,"onUpdate:modelValue":a[2]||(a[2]=e=>t.query.address=e),placeholder:"任务号"},null,8,["modelValue"])])),_:1}),p(n,{label:"产品代号"},{default:F((()=>[p(u,{modelValue:t.query.address,"onUpdate:modelValue":a[3]||(a[3]=e=>t.query.address=e),placeholder:"产品代号"},null,8,["modelValue"])])),_:1}),p(n,{label:"零件代号"},{default:F((()=>[p(u,{modelValue:t.query.address,"onUpdate:modelValue":a[4]||(a[4]=e=>t.query.address=e),placeholder:"零件代号"},null,8,["modelValue"])])),_:1}),p(n,{label:"零件名称"},{default:F((()=>[p(u,{modelValue:t.query.address,"onUpdate:modelValue":a[5]||(a[5]=e=>t.query.address=e),placeholder:"零件名称"},null,8,["modelValue"])])),_:1}),p(n,{label:"调度备注"},{default:F((()=>[p(u,{modelValue:t.query.address,"onUpdate:modelValue":a[6]||(a[6]=e=>t.query.address=e),placeholder:"调度备注"},null,8,["modelValue"])])),_:1}),p(n,{label:"状态"},{default:F((()=>[p(b,{modelValue:t.query.address,"onUpdate:modelValue":a[7]||(a[7]=e=>t.query.address=e),placeholder:"状态",class:"handle-select mr10"},{default:F((()=>[p(c,{key:"1",label:"在线",value:"在线"}),p(c,{key:"2",label:"完结",value:"完结"})])),_:1},8,["modelValue"])])),_:1}),p(n,null,{default:F((()=>[p(y,{type:"primary",onClick:t.handleSearch},{default:F((()=>[E])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),p(y,{type:"primary",icon:"el-icon-plus",style:{"margin-bottom":"20px"},onClick:t.handleAdd},{default:F((()=>[U])),_:1},8,["onClick"]),p(h,{cols:t.columns},{status:F((e=>[p(D,{type:"成功"===e.scopeData.status?"success":"失败"===e.scopeData.status?"danger":""},{default:F((()=>[m(k(e.scopeData.status),1)])),_:2},1032,["type"])])),index:F((e=>[p(v,{href:"javascript:void(0)",type:"primary",onClick:a=>t.showDetail(e.scopeData)},{default:F((()=>[m(k(e.scopeData.index),1)])),_:2},1032,["onClick"])])),partId:F((e=>[p(v,{href:"javascript:void(0)",type:"primary",onClick:a=>t.showPartDetail(e.scopeData)},{default:F((()=>[m(k(e.scopeData.partId),1)])),_:2},1032,["onClick"])])),operation:F((e=>[p(y,{type:"text",icon:"el-icon-edit",onClick:a=>t.handleEdit(e.scopeData)},{default:F((()=>[j])),_:2},1032,["onClick"]),p(y,{type:"text",icon:"el-icon-delete",class:"red",onClick:a=>t.handleDelete(e.scopeData)},{default:F((()=>[w])),_:2},1032,["onClick"])])),_:1},8,["cols"])]),p(V,{visible:t.editVisible,onClose:a[8]||(a[8]=e=>t.editVisible=!1),itemData:t.editItemData,formItems:t.formItems,key:"product-edit",onDialogSubmit:t.editSubmit},null,8,["visible","itemData","formItems","onDialogSubmit"]),p(q,{visible:t.detailVisible,onClose:a[9]||(a[9]=e=>t.detailVisible=!1),key:"detail",itemData:t.editItemData},null,8,["visible","itemData"]),p(I,{visible:t.partDetailVisible,onClose:a[10]||(a[10]=e=>t.partDetailVisible=!1),key:"detail",partId:t.detailPartId},null,8,["visible","partId"])])}));N.render=A,N.__scopeId="data-v-3bbe85a8";export default N;
