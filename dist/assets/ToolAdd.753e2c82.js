var e=Object.defineProperty,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t;import{i,b as n,p as r,h as d,L as s,w as c,r as u,o as m,c as p,e as b,g as f,l as y}from"./vendor.86c6712b.js";import{_ as v}from"./MesuringTable.63d439f4.js";import{_ as h,g,h as w}from"./index.2615daba.js";import{a as D}from"./ProductDetail.382fd02a.js";const _={components:{BaseTable:v,ProductAdd:h,ProductDetail:D},name:"tool-add-manage",setup(){const e=i({name:""}),r=n({}),d=()=>{r.value.refresh(e)},u=n(!1);let m=n(null);return{columns:[{label:"工具名称",prop:"name"},{label:"固定展示字段",prop:"stableField",slot:"stableField"},{label:"特殊展示字段",prop:"specField"}],formItems:[{label:"工具类名称",key:"name",required:!0,width:"100%"},{label:"特殊展示字段",key:"specField",required:!1,placeholder:"多个字段使用|隔开",width:"100%"}],toolTypeTable:r,query:e,editVisible:u,handleSearch:d,handleDelete:e=>{s.confirm("确定要删除吗？","提示",{type:"warning"}).then((async()=>{await g({toolId:e.id}),c.success("删除成功"),window.location.reload(),d()})).catch((()=>{}))},handleEdit:e=>{u.value=!0,m.value=JSON.parse(JSON.stringify(e)),m.value.toolProps=m.value.toolProps.map((e=>e.label)).join("|")},editItemData:m,editSubmit:async e=>{var i;await w(((e,i)=>{for(var n in i||(i={}))a.call(i,n)&&o(e,n,i[n]);if(l)for(var n of l(i))t.call(i,n)&&o(e,n,i[n]);return e})({id:null==(i=m.value)?void 0:i.id},e)),c.success("添加成功"),window.location.reload(),u.value=!1,d()},handleAdd:()=>{u.value=!0,m.value=null}}}},k=f();r("data-v-51f5ba66");const j={class:"container"},C=y("查询"),I=y("添加工具种类"),P=b("span",null,"采购单位 | 名称 | 规格型号 | 库房存放点 | 库房剩余数量 | 总购数量",-1),S=y("编辑 "),O=y("删除");d();const T=k(((e,l,a,t,o,i)=>{const n=u("el-input"),r=u("el-form-item"),d=u("el-button"),s=u("el-form"),c=u("BaseTable"),f=u("ProductAdd");return m(),p("div",null,[b("div",j,[b(s,{inline:!0,model:t.query,class:"demo-form-inline"},{default:k((()=>[b(r,{label:"工具类名称"},{default:k((()=>[b(n,{modelValue:t.query.name,"onUpdate:modelValue":l[1]||(l[1]=e=>t.query.name=e),placeholder:"工具类名称"},null,8,["modelValue"])])),_:1}),b(r,null,{default:k((()=>[b(d,{type:"primary",onClick:t.handleSearch},{default:k((()=>[C])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),b(d,{type:"primary",icon:"el-icon-plus",style:{"margin-bottom":"20px"},onClick:t.handleAdd},{default:k((()=>[I])),_:1},8,["onClick"]),b(c,{cols:t.columns,ref:"toolTypeTable",url:"/tool-manage/tool/list"},{stableField:k((e=>[P])),operation:k((e=>[b(d,{type:"text",icon:"el-icon-edit",style:{"margin-left":"0"},onClick:l=>t.handleEdit(e.scopeData)},{default:k((()=>[S])),_:2},1032,["onClick"]),b(d,{type:"text",icon:"el-icon-delete",class:"color-danger",onClick:l=>t.handleDelete(e.scopeData)},{default:k((()=>[O])),_:2},1032,["onClick"])])),_:1},8,["cols"])]),b(f,{visible:t.editVisible,onClose:l[2]||(l[2]=e=>t.editVisible=!1),itemData:t.editItemData,formItems:t.formItems,onDialogSubmit:t.editSubmit},null,8,["visible","itemData","formItems","onDialogSubmit"])])}));_.render=T,_.__scopeId="data-v-51f5ba66";export default _;
