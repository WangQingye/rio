import{u as e,a as s,i as a,b as r,p as o,h as l,w as t,r as u,o as m,c as n,e as i,I as d,g as p,l as c}from"./vendor.86c6712b.js";import{m as g,n as f}from"./index.b3e4d661.js";const w={setup(){const o=e(),l=s(),u=a({username:"",password:""}),m=r(null);return l.commit("clearTags"),{param:u,rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},login:m,submitForm:async()=>{m.value.validate((async e=>{if(!e)return t.error("请完善表格"),!1;{let e=await g({username:u.username,password:u.password});if(e.status||!e)return t.error(e.msg),!1;t.success("登录成功"),l.commit("setUserInfo",e),localStorage.setItem("ruiao_user",JSON.stringify(e)),"SYS_ADMIN"===e.authorities[0].authority?o.push("/"):o.push("/work-list")}}))}}}},b=p();o("data-v-03b93979");const _={class:"login-wrap"},h={class:"ms-login"},v=i("img",{class:"logo-img",src:f},null,-1),y={class:"login-btn"},V=c("登录");l();const I=b(((e,s,a,r,o,l)=>{const t=u("el-button"),p=u("el-input"),c=u("el-form-item"),g=u("el-form");return m(),n("div",_,[i("div",h,[v,i(g,{model:r.param,rules:r.rules,ref:"login","label-width":"0px",class:"ms-content"},{default:b((()=>[i(c,{prop:"username"},{default:b((()=>[i(p,{modelValue:r.param.username,"onUpdate:modelValue":s[1]||(s[1]=e=>r.param.username=e),placeholder:"username"},{prepend:b((()=>[i(t,{icon:"el-icon-user"})])),_:1},8,["modelValue"])])),_:1}),i(c,{prop:"password"},{default:b((()=>[i(p,{type:"password",placeholder:"password",modelValue:r.param.password,"onUpdate:modelValue":s[2]||(s[2]=e=>r.param.password=e),onKeyup:s[3]||(s[3]=d((e=>r.submitForm()),["enter"]))},{prepend:b((()=>[i(t,{icon:"el-icon-lock"})])),_:1},8,["modelValue"])])),_:1}),i("div",y,[i(t,{type:"primary",onClick:s[4]||(s[4]=e=>r.submitForm())},{default:b((()=>[V])),_:1})])])),_:1},8,["model","rules"])])])}));w.render=I,w.__scopeId="data-v-03b93979";export default w;
