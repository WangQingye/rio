import{B as e,i as l,p as a,a as o,L as d,E as i,r as t,o as n,c as r,f as u,h as s,t as m,w as p}from"./vendor.783501fb.js";import{f as c}from"./index.5a2f37f4.js";import{_ as b,b as y}from"./MesuringTable.2c9644ae.js";import{a as f}from"./ProductDetail.61e77cfb.js";const k={components:{BaseTable:b,ProductAdd:y,ProductDetail:f},name:"product-manage",setup(){const a=e({address:"",name:"",pageIndex:1,pageSize:10}),o=l([]),t=l(0),n=()=>{c(a).then((e=>{o.value=e.list,t.value=e.pageTotal||50}))},r=l(!1);let u=l(null);const s=l(!1),m=l(!1),p=l({user:""}),b=l(!1),y=l(!1),f=l(null),k=l(!1),g=l({knifeName:"",knifeType:""}),h=l(!1);return{columns:[{label:"采购单位",prop:"company",slot:"company"},{label:"刀具名称",prop:"name"},{label:"规格型号",prop:"type",slot:"type"},{label:"库房存放点",prop:"storePlace"},{label:"库房剩余数量",prop:"restNum"},{label:"总购数量",prop:"totalNum"},{label:"归还后可二次使用数量",prop:"reuseNum"},{label:"废品数量",prop:"disuseNum"}],formItems:[{label:"采购单位",key:"company"},{label:"刀具名称",key:"knifeName"},{label:"规格型号",key:"knifeType"},{label:"库房存放点",key:"storePlace"},{label:"总购数量",key:"totalNum"},{label:"归还后可二次使用数量",key:"reuseNum"},{label:"废品数量",key:"disuseNum"}],query:a,tableData:o,pageTotal:t,editVisible:r,handleSearch:()=>{a.pageIndex=1,n()},handlePageChange:e=>{a.pageIndex=e,n()},handleDelete:e=>{d.confirm("确定要删除吗？","提示",{type:"warning"}).then((()=>{i.success("删除成功"),o.value.splice(e,1)})).catch((()=>{}))},handleEdit:e=>{r.value=!0,u.value=e},showDetail:e=>{u.value=e,s.value=!0},editItemData:u,editSubmit:e=>{console.log(e)},handleAdd:()=>{r.value=!0,u.value=null},detailVisible:s,handleLendingRecords:e=>{m.value=!0,u.value=e},lendingRecordsColumns:[{label:"领用人",prop:"lendUser"},{label:"领用数量",prop:"lendNum"},{label:"领用日期",prop:"lendTime"},{label:"归还数量",prop:"returnNum"},{label:"归还后可二次使用数量",prop:"reuseNum"},{label:"废品数量",prop:"disuseNum"},{label:"还回日期",prop:"returnTime"},{label:"归属序号",prop:"fromIndex"},{label:"零件代号",prop:"partId"},{label:"零件名称",prop:"partName"},{label:"采购单价",prop:"price"},{label:"备注",prop:"remark"}],lendingRecordsVisible:m,lendQuery:p,handleLendSearch:()=>{},showAddLend:e=>{b.value=!0},addLendVisible:b,addLendFormItems:[{label:"领用人",key:"lendUser",required:!0},{label:"领用数量",key:"lendNum",required:!0,type:"number"},{label:"备注",key:"remark",required:!0,type:"textarea"}],addLendSubmit:e=>{console.log(e)},showReturnMesuring:e=>{y.value=!0,f.value=e},returnMesuringVisible:y,returnMesuringItems:[{label:"归还数量",key:"num",required:!0,type:"returnNum"},{label:"归还后可二次使用数量",key:"num",required:!0,type:"reuseNum"},{label:"废品数量",key:"num",required:!0,type:"disuseNum"}],returnMesuringSubmit:e=>{console.log(e)},buyRecordsVisible:k,handBuyRecords:e=>{k.value=!0,u.value=e},buyQuery:g,handleBuySearch:()=>{},addBuyVisible:h,showAddBuy:e=>{b.value=!0},addBuySubmit:()=>{console.log()},buyRecordsColumns:[{label:"生产厂家",prop:"company"},{label:"刀具名称",prop:"knifeName"},{label:"规格型号",prop:"knifeType"},{label:"采购时间",prop:"buyTime"},{label:"采购数量",prop:"buyNum"},{label:"采购单价",prop:"price"},{label:"回厂时间",prop:"backTime"}],addBuyFormItems:[{label:"采购单位",key:"company",required:!0},{label:"刀具名称",key:"knifeName",required:!0},{label:"规格型号",key:"knifeType"},{label:"采购时间",key:"buyTime",required:!0},{label:"采购数量",key:"buyNum",required:!0},{label:"采购单价",key:"price",required:!0},{label:"回厂时间",key:"backTime",required:!0}]}}},g=p();a("data-v-3f3ba672");const h={class:"container"},V=s("查询"),C=s("添加刀具"),_=s("查询"),v=s(" 领用 "),D=s("归还 "),I=s("删除"),N={class:"dialog-footer"},S=s("关 闭"),R=s("查询"),T=s(" 添加记录 "),q=s("编辑 "),B=s("删除"),L={class:"dialog-footer"},w=s("关 闭");o();const x=g(((e,l,a,o,d,i)=>{const p=t("el-input"),c=t("el-form-item"),b=t("el-button"),y=t("el-form"),f=t("el-tag"),k=t("el-link"),x=t("BaseTable"),M=t("ProductAdd"),Q=t("el-dialog");return n(),r("div",null,[u("div",h,[u(y,{inline:!0,model:o.query,class:"demo-form-inline"},{default:g((()=>[u(c,{label:"采购单位"},{default:g((()=>[u(p,{modelValue:o.query.address,"onUpdate:modelValue":l[1]||(l[1]=e=>o.query.address=e),placeholder:"采购单位"},null,8,["modelValue"])])),_:1}),u(c,{label:"刀具名称"},{default:g((()=>[u(p,{modelValue:o.query.address,"onUpdate:modelValue":l[2]||(l[2]=e=>o.query.address=e),placeholder:"刀具名称"},null,8,["modelValue"])])),_:1}),u(c,{label:"规格型号"},{default:g((()=>[u(p,{modelValue:o.query.address,"onUpdate:modelValue":l[3]||(l[3]=e=>o.query.address=e),placeholder:"规格型号"},null,8,["modelValue"])])),_:1}),u(c,null,{default:g((()=>[u(b,{type:"primary",onClick:o.handleSearch},{default:g((()=>[V])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),u(b,{type:"primary",icon:"el-icon-plus",style:{"margin-bottom":"20px"},onClick:o.handleAdd},{default:g((()=>[C])),_:1},8,["onClick"]),u(x,{cols:o.columns,needOperation:!1,url:"/knife"},{status:g((e=>[u(f,{type:"成功"===e.scopeData.status?"success":"失败"===e.scopeData.status?"danger":""},{default:g((()=>[s(m(e.scopeData.status),1)])),_:2},1032,["type"])])),type:g((e=>[u(k,{href:"javascript:void(0)",type:"primary",onClick:l=>o.handleLendingRecords(e.scopeData)},{default:g((()=>[s(m(e.scopeData.type),1)])),_:2},1032,["onClick"])])),company:g((e=>[u(k,{href:"javascript:void(0)",type:"primary",onClick:l=>o.handBuyRecords(e.scopeData)},{default:g((()=>[s(m(e.scopeData.company),1)])),_:2},1032,["onClick"])])),_:1},8,["cols"])]),u(M,{visible:o.editVisible,onClose:l[4]||(l[4]=e=>o.editVisible=!1),itemData:o.editItemData,formItems:o.formItems,propTitle:"添加刀具",onDialogSubmit:o.editSubmit},null,8,["visible","itemData","formItems","onDialogSubmit"]),u(Q,{title:`领用记录 - ${o.editItemData&&o.editItemData.type}`,modelValue:o.lendingRecordsVisible,"onUpdate:modelValue":l[7]||(l[7]=e=>o.lendingRecordsVisible=e),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"80%"},{footer:g((()=>[u("span",N,[u(b,{onClick:l[6]||(l[6]=e=>o.lendingRecordsVisible=!1)},{default:g((()=>[S])),_:1})])])),default:g((()=>[u(y,{inline:!0,model:o.lendQuery,class:"demo-form-inline"},{default:g((()=>[u(c,{label:"领用人"},{default:g((()=>[u(p,{modelValue:o.lendQuery.user,"onUpdate:modelValue":l[5]||(l[5]=e=>o.lendQuery.user=e),placeholder:"领用人"},null,8,["modelValue"])])),_:1}),u(c,null,{default:g((()=>[u(b,{type:"primary",onClick:o.handleLendSearch},{default:g((()=>[_])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),u(b,{type:"primary",icon:"el-icon-plus",style:{"margin-bottom":"20px"},onClick:o.showAddLend},{default:g((()=>[v])),_:1},8,["onClick"]),u(x,{cols:o.lendingRecordsColumns,url:"/knifeLendRecords"},{operation:g((e=>[u(b,{type:"text",icon:"el-icon-download",class:"color-success",onClick:l=>o.showReturnMesuring(e.scopeData)},{default:g((()=>[D])),_:2},1032,["onClick"]),u(b,{type:"text",icon:"el-icon-delete",class:"color-danger",onClick:l=>o.handleDelete(e.scopeData)},{default:g((()=>[I])),_:2},1032,["onClick"])])),_:1},8,["cols"])])),_:1},8,["title","modelValue"]),u(M,{visible:o.addLendVisible,onClose:l[8]||(l[8]=e=>o.addLendVisible=!1),formItems:o.addLendFormItems,propTitle:"领用刀具",onDialogSubmit:o.addLendSubmit},null,8,["visible","formItems","onDialogSubmit"]),u(M,{visible:o.returnMesuringVisible,onClose:l[9]||(l[9]=e=>o.returnMesuringVisible=!1),formItems:o.returnMesuringItems,propTitle:"归还刀具",onDialogSubmit:o.returnMesuringSubmit},null,8,["visible","formItems","onDialogSubmit"]),u(Q,{title:`采购记录 - ${o.editItemData&&o.editItemData.company}`,modelValue:o.buyRecordsVisible,"onUpdate:modelValue":l[14]||(l[14]=e=>o.buyRecordsVisible=e),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"80%"},{footer:g((()=>[u("span",L,[u(b,{onClick:l[12]||(l[12]=e=>o.buyRecordsVisible=!1)},{default:g((()=>[w])),_:1})])])),default:g((()=>[u(y,{inline:!0,model:o.buyQuery,class:"demo-form-inline"},{default:g((()=>[u(c,{label:"刀具名称"},{default:g((()=>[u(p,{modelValue:o.buyQuery.knifeName,"onUpdate:modelValue":l[10]||(l[10]=e=>o.buyQuery.knifeName=e),placeholder:"刀具名称"},null,8,["modelValue"])])),_:1}),u(c,{label:"规格型号"},{default:g((()=>[u(p,{modelValue:o.buyQuery.knifeType,"onUpdate:modelValue":l[11]||(l[11]=e=>o.buyQuery.knifeType=e),placeholder:"规格型号"},null,8,["modelValue"])])),_:1}),u(c,null,{default:g((()=>[u(b,{type:"primary",onClick:o.handleBuySearch},{default:g((()=>[R])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),u(b,{type:"primary",icon:"el-icon-plus",style:{"margin-bottom":"20px"},onClick:o.showAddBuy},{default:g((()=>[T])),_:1},8,["onClick"]),u(x,{cols:o.buyRecordsColumns,url:"/knifeBuyRecords"},{operation:g((e=>[u(b,{type:"text",icon:"el-icon-download",class:"color-success",onClick:l=>o.showReturnMesuring(e.scopeData)},{default:g((()=>[q])),_:2},1032,["onClick"]),u(b,{type:"text",icon:"el-icon-delete",class:"color-danger",onClick:l=>o.handleDelete(e.scopeData)},{default:g((()=>[B])),_:2},1032,["onClick"])])),_:1},8,["cols"]),u(M,{visible:o.addBuyVisible,onClose:l[13]||(l[13]=e=>o.addBuyVisible=!1),formItems:o.addBuyFormItems,propTitle:"添加购买记录",onDialogSubmit:o.addBuySubmit},null,8,["visible","formItems","onDialogSubmit"])])),_:1},8,["title","modelValue"])])}));k.render=x,k.__scopeId="data-v-3f3ba672";export default k;
