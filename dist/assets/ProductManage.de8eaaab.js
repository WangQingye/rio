import{p as e,a,B as l,i as t,b as o,D as r,r as d,o as s,c as i,f as p,F as u,l as n,w as c,h as m,L as b,E as y,t as f}from"./vendor.783501fb.js";import{f as k}from"./index.4c0ae215.js";import{_ as g,a as h,b as v}from"./MesuringTable.4d1cd74b.js";import{_ as D,a as V}from"./ProductDetail.faf80dea.js";const C={components:{BaseTable:g,MesuringTable:h,ProcessPriceTag:D,ProductAdd:v},props:{visible:{type:Boolean,required:!0},partId:{type:String}},emits:["close","dialog-submit"],name:"product-add",setup(e,{emit:a}){const d=l({}),s=t(0),i=l({}),p=t("process"),u=o((()=>e.visible));r(u,(()=>{1==u.value?e.itemData&&Object.keys(e.itemData).map((a=>{i[a]=e.itemData[a]})):Object.keys(i).map((e=>{delete i[e]}))}));const n=t(!1),c=t(null);return{stepColumns:[{label:"工序",prop:"stepName"},{label:"操作者",prop:"userName",slot:"userName"},{label:"当前状态",prop:"status"},{label:"操作设备",prop:"equipment"},{label:"接受产品数量",prop:"receiveNum"},{label:"开工时间",prop:"startTime"},{label:"要求完工时间",prop:"planFinishTime"},{label:"实际完工时间",prop:"finishTime"},{label:"合格产品数量",prop:"qualifiedNum"},{label:"运行时间",prop:"runTime",slot:"runTime"},{label:"最高记录",prop:"highScore"},{label:"工序单价（元）",prop:"stepPrice"},{label:"备注",prop:"remark"}],meusringColumns:[{label:"量具名称",prop:"mesuringName"},{label:"量具规格",prop:"mesuringSpecs"},{label:"量具编号",prop:"mesuringId"},{label:"归属序号",prop:"fromIndex"},{label:"数量",prop:"num"},{label:"状态",prop:"status"},{label:"入库时间",prop:"inTime"},{label:"归还时间",prop:"returnTime"}],partStepColumns:[{label:"工序",prop:"stepName"},{label:"操作设备",prop:"equipment"},{label:"工序单价",prop:"stepPrice"}],editPartStepFormItems:[{label:"工序",key:"stepName",required:!0},{label:"操作设备",key:"equipment",required:!0}],close:()=>{a("close")},activeName:p,saveEdit:()=>{a("dialog-submit",i)},form:i,partStepEditVisible:n,handleAddStep:()=>{n.value=!0,c.value=null},handleEditStep:e=>{n.value=!0,c.value=e},handleDeleteStep:e=>{},editPartStepItemData:c,editPartStepSubmit:e=>{},processQuery:d,handleProcessSearch:()=>{},pageTotal:s,handlePageChange:()=>{}}}},q=c();e("data-v-6556f225");const I=m("查询"),_={class:"pagination"},P=m("添加工序"),S=m("编辑 "),T=m("删除"),x={class:"dialog-footer"},N=m("关 闭");a();const F=q(((e,a,l,t,o,r)=>{const c=d("el-input"),m=d("el-form-item"),b=d("el-button"),y=d("el-form"),f=d("ProcessPriceTag"),k=d("BaseTable"),g=d("el-card"),h=d("el-pagination"),v=d("el-tab-pane"),D=d("ProductAdd"),V=d("el-tabs"),C=d("el-dialog");return s(),i(C,{"append-to-body":!0,title:`零件生产详情 - ${l.partId}`,modelValue:l.visible,"onUpdate:modelValue":a[4]||(a[4]=e=>l.visible=e),"show-close":!1,"destroy-on-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"80%"},{footer:q((()=>[p("span",x,[p(b,{onClick:t.close},{default:q((()=>[N])),_:1},8,["onClick"])])])),default:q((()=>[p(V,{modelValue:t.activeName,"onUpdate:modelValue":a[3]||(a[3]=e=>t.activeName=e)},{default:q((()=>[p(v,{label:"生产情况",name:"process",class:"part-info"},{default:q((()=>[p(y,{inline:!0,model:t.processQuery,class:"demo-form-inline"},{default:q((()=>[p(m,{label:"序号"},{default:q((()=>[p(c,{modelValue:t.processQuery.address,"onUpdate:modelValue":a[1]||(a[1]=e=>t.processQuery.address=e),placeholder:"序号"},null,8,["modelValue"])])),_:1}),p(m,null,{default:q((()=>[p(b,{type:"primary",onClick:t.handleProcessSearch},{default:q((()=>[I])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),(s(),i(u,null,n(3,(e=>p(g,{class:"part-card",key:e,style:{padding:"0","margin-bottom":"10px"}},{default:q((()=>[p(f,{fromIndex:"21-9-1"}),p(k,{noBorder:"",noPager:"",cols:t.stepColumns,url:"/step",needOperation:!1},null,8,["cols"])])),_:2},1024))),64)),p("div",_,[p(h,{background:"",layout:"total, prev, pager, next","current-page":t.processQuery.pageIndex,"page-size":t.processQuery.pageSize,total:t.pageTotal,onCurrentChange:t.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])])),_:1}),p(v,{label:"工序设置",name:"mesuring"},{default:q((()=>[p(b,{type:"primary",icon:"el-icon-plus",style:{"margin-bottom":"10px"},onClick:t.handleAddStep},{default:q((()=>[P])),_:1},8,["onClick"]),p(k,{cols:t.partStepColumns,url:"/partStep"},{operation:q((e=>[p(b,{type:"text",icon:"el-icon-edit",onClick:a=>t.handleEditStep(e.scopeData)},{default:q((()=>[S])),_:2},1032,["onClick"]),p(b,{type:"text",icon:"el-icon-delete",class:"color-warning",onClick:a=>t.handleDeleteStep(e.scopeData)},{default:q((()=>[T])),_:2},1032,["onClick"])])),_:1},8,["cols"]),p(D,{visible:t.partStepEditVisible,onClose:a[2]||(a[2]=e=>t.partStepEditVisible=!1),title:"工序设置",itemData:t.editPartStepItemData,formItems:t.editPartStepFormItems,key:"product-edit",onDialogSubmit:t.editPartStepSubmit},null,8,["visible","itemData","formItems","onDialogSubmit"])])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["title","modelValue"])}));C.render=F,C.__scopeId="data-v-6556f225";const U={components:{BaseTable:g,ProductAdd:v,ProductDetail:V,PartDetail:C},name:"product-manage",setup(){const e=l({address:"",name:"",pageIndex:1,pageSize:10}),a=t([]),o=t(0),r=()=>{k(e).then((e=>{a.value=e.list,o.value=e.pageTotal||50}))};r();const d=t(!1),s=t(null),i=t(!1),p=t(!1),u=t("");return{columns:[{label:"序号",prop:"index",slot:"index"},{label:"任务号",prop:"taskId"},{label:"产品代号",prop:"productId"},{label:"零件代号",prop:"partId",slot:"partId"},{label:"零件名称",prop:"partName"},{label:"图纸工序",prop:"blueprintProcess"},{label:"本厂实际工序",prop:"factoryProcess"},{label:"回厂数量",prop:"backFactoryNum"},{label:"回厂日期",prop:"backFactoryTime"},{label:"调度备注",prop:"dispatchRemark"},{label:"甲方要求回厂时间",prop:"customerBackFactoryTime"},{label:"状态",prop:"status",slot:"status"},{label:"备注",prop:"remark"},{label:"出厂数量",prop:"outFactoryNum"},{label:"出厂时间",prop:"outFactoryTime"},{label:"最终甲方检验合格数",prop:"finalCustomerQualifiedNum"}],formItems:[{label:"序号",key:"index",required:!0},{label:"任务号",key:"taskId",required:!0},{label:"产品代号",key:"productId",required:!0},{label:"零件代号",key:"partId",required:!0},{label:"名称",key:"name",required:!0},{label:"图纸工序",key:"blueprintProcess",required:!0},{label:"本厂实际工序",key:"factoryProcess",required:!0},{label:"回厂数量",key:"backFactoryNum",required:!0},{label:"回厂日期",key:"backFactoryTime",required:!0,type:"date"},{label:"调度备注",key:"dispatchRemark",required:!0},{label:"甲方要求回厂时间",key:"customerBackFactoryTime",required:!0,type:"date"},{label:"状态",key:"status",required:!0},{label:"备注",key:"remark",required:!0},{label:"出厂数量",key:"outFactoryNum",required:!0},{label:"出厂时间",key:"outFactoryTime",required:!0,type:"date"},{label:"最终甲方检验合格数",key:"finalCustomerQualifiedNum",required:!0}],query:e,tableData:a,pageTotal:o,editVisible:d,handleSearch:()=>{e.pageIndex=1,r()},handlePageChange:a=>{e.pageIndex=a,r()},handleDelete:e=>{b.confirm("确定要删除吗？","提示",{type:"warning"}).then((()=>{y.success("删除成功"),a.value.splice(e,1)})).catch((()=>{}))},handleEdit:e=>{d.value=!0,s.value=e},showDetail:e=>{i.value=!0,s.value=e},editItemData:s,editSubmit:e=>{},handleAdd:()=>{d.value=!0,s.value=null},detailVisible:i,partDetailVisible:p,detailPartId:u,showPartDetail:e=>{p.value=!0,u.value=e.partId}}}},w=c();e("data-v-cb7c5902");const B={class:"container"},E=m("查询"),j=m("添加批次"),A=m("编辑 "),Q=m("删除");a();const z=w(((e,a,l,t,o,r)=>{const u=d("el-input"),n=d("el-form-item"),c=d("el-option"),b=d("el-select"),y=d("el-button"),k=d("el-form"),g=d("el-tag"),h=d("el-link"),v=d("BaseTable"),D=d("ProductAdd"),V=d("ProductDetail"),C=d("PartDetail");return s(),i("div",null,[p("div",B,[p(k,{inline:!0,model:t.query,class:"demo-form-inline"},{default:w((()=>[p(n,{label:"序号"},{default:w((()=>[p(u,{modelValue:t.query.address,"onUpdate:modelValue":a[1]||(a[1]=e=>t.query.address=e),placeholder:"序号"},null,8,["modelValue"])])),_:1}),p(n,{label:"任务号"},{default:w((()=>[p(u,{modelValue:t.query.address,"onUpdate:modelValue":a[2]||(a[2]=e=>t.query.address=e),placeholder:"任务号"},null,8,["modelValue"])])),_:1}),p(n,{label:"产品代号"},{default:w((()=>[p(u,{modelValue:t.query.address,"onUpdate:modelValue":a[3]||(a[3]=e=>t.query.address=e),placeholder:"产品代号"},null,8,["modelValue"])])),_:1}),p(n,{label:"零件代号"},{default:w((()=>[p(u,{modelValue:t.query.address,"onUpdate:modelValue":a[4]||(a[4]=e=>t.query.address=e),placeholder:"零件代号"},null,8,["modelValue"])])),_:1}),p(n,{label:"零件名称"},{default:w((()=>[p(u,{modelValue:t.query.address,"onUpdate:modelValue":a[5]||(a[5]=e=>t.query.address=e),placeholder:"零件名称"},null,8,["modelValue"])])),_:1}),p(n,{label:"调度备注"},{default:w((()=>[p(u,{modelValue:t.query.address,"onUpdate:modelValue":a[6]||(a[6]=e=>t.query.address=e),placeholder:"调度备注"},null,8,["modelValue"])])),_:1}),p(n,{label:"状态"},{default:w((()=>[p(b,{modelValue:t.query.address,"onUpdate:modelValue":a[7]||(a[7]=e=>t.query.address=e),placeholder:"状态",class:"handle-select mr10"},{default:w((()=>[p(c,{key:"1",label:"在线",value:"在线"}),p(c,{key:"2",label:"完结",value:"完结"})])),_:1},8,["modelValue"])])),_:1}),p(n,null,{default:w((()=>[p(y,{type:"primary",onClick:t.handleSearch},{default:w((()=>[E])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),p(y,{type:"primary",icon:"el-icon-plus",style:{"margin-bottom":"20px"},onClick:t.handleAdd},{default:w((()=>[j])),_:1},8,["onClick"]),p(v,{cols:t.columns},{status:w((e=>[p(g,{type:"成功"===e.scopeData.status?"success":"失败"===e.scopeData.status?"danger":""},{default:w((()=>[m(f(e.scopeData.status),1)])),_:2},1032,["type"])])),index:w((e=>[p(h,{href:"javascript:void(0)",type:"primary",onClick:a=>t.showDetail(e.scopeData)},{default:w((()=>[m(f(e.scopeData.index),1)])),_:2},1032,["onClick"])])),partId:w((e=>[p(h,{href:"javascript:void(0)",type:"primary",onClick:a=>t.showPartDetail(e.scopeData)},{default:w((()=>[m(f(e.scopeData.partId),1)])),_:2},1032,["onClick"])])),operation:w((e=>[p(y,{type:"text",icon:"el-icon-edit",onClick:a=>t.handleEdit(e.scopeData)},{default:w((()=>[A])),_:2},1032,["onClick"]),p(y,{type:"text",icon:"el-icon-delete",class:"red",onClick:a=>t.handleDelete(e.scopeData)},{default:w((()=>[Q])),_:2},1032,["onClick"])])),_:1},8,["cols"])]),p(D,{visible:t.editVisible,onClose:a[8]||(a[8]=e=>t.editVisible=!1),itemData:t.editItemData,formItems:t.formItems,key:"product-edit",onDialogSubmit:t.editSubmit},null,8,["visible","itemData","formItems","onDialogSubmit"]),p(V,{visible:t.detailVisible,onClose:a[9]||(a[9]=e=>t.detailVisible=!1),key:"detail",itemData:t.editItemData},null,8,["visible","itemData"]),p(C,{visible:t.partDetailVisible,onClose:a[10]||(a[10]=e=>t.partDetailVisible=!1),key:"detail",partId:t.detailPartId},null,8,["visible","partId"])])}));U.render=z,U.__scopeId="data-v-cb7c5902";export default U;
